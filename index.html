// ... (HTML èˆ‡ CSS éƒ¨åˆ†ç¶­æŒä¸è®Š) ...

    function loadVideo() {
        const target = document.getElementById('target-id').value.trim();
        const decoys = document.getElementById('decoy-ids').value.trim().split('\n');
        var isTarget = Math.random() > 0.33; 
        var currentId = isTarget ? target : decoys[Math.floor(Math.random() * decoys.length)].trim();
        
        // ä¿®æ­£é‡é»ï¼šç¢ºä¿æ¯æ¬¡åˆ‡æ›éƒ½é‡æ–°è¨­å®šåƒæ•¸
        if (player && player.loadVideoById) {
            player.loadVideoById(currentId);
            // ã€æ–°å¢ã€‘åˆ‡æ›å½±ç‰‡æ™‚æ‰‹å‹•è§¸ç™¼æ“¬äººåŒ–è¨­å®š
            applyRandomSettings(player); 
        } else {
            player = new YT.Player('player', {
                height: '360', width: '100%', videoId: currentId,
                playerVars: { 'autoplay': 1, 'controls': 1, 'origin': window.location.origin },
                events: { 
                    'onReady': (e) => { 
                        applyRandomSettings(e.target); // ç¬¬ä¸€æ¬¡å•Ÿå‹•æ™‚è§¸ç™¼
                        e.target.playVideo(); 
                    }, 
                    'onStateChange': onPlayerStateChange 
                }
            });
        }
        document.getElementById('state').innerText = isTarget ? "è­·èˆªç›®æ¨™ä¸­" : "æŠ•æ”¾ç…™éœ§å½ˆä¸­";
        addLog("ğŸ¬ è¼‰å…¥å½±ç‰‡ï¼š" + currentId);
    }

    function applyRandomSettings(p) {
        if (!p || typeof p.setPlaybackRate !== 'function') return;
        
        // é‡æ–°è¨­è¨ˆæ›´ç´°è†©çš„éš¨æ©Ÿå€¼
        var rate = (Math.random() > 0.5) ? 1.0 : 1.05;
        var vol = Math.floor(Math.random() * (95 - 60 + 1) + 60);
        
        p.setPlaybackRate(rate);
        p.setVolume(vol);
        addLog("âš™ï¸ æ“¬äººåƒæ•¸ï¼šå€é€Ÿ " + rate + "x, éŸ³é‡ " + vol + "%");
    }

// ... (å¾ŒçºŒ Worker ç›£è½èˆ‡ Log å‡½å¼ç¶­æŒä¸è®Š) ...
